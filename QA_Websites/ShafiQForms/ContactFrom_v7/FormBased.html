<!DOCTYPE html>
<html lang="en">
<head>
	<title>Contact V7</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->
	<link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/Linearicons-Free-v1.0.0/icon-font.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
<!--===============================================================================================-->
</head>
<body>
    <script>
                    window.addEventListener('load', function() {
                    var browserFingerPrint = ''
                    let s = document.createElement('script');
                    s.async = 1;
                    s.src = 'https://cdnjs.cloudflare.com/ajax/libs/fingerprintjs2/2.1.0/fingerprint2.js';
                    let parent_node = document.head || document.body;
                    parent_node.appendChild(s);
                    s.addEventListener('load', function() {
                        Fingerprint2.get(function(components) {
                            browserFingerPrint = Fingerprint2.x64hash128(components.map(function(pair) {
                                return pair.value
                            }).join(), 31)
                        })
                    });

                    var codeGenMetadata = {
                        // todo: put form id here
                        formPropertyId: 126,
                        formSelector: '[class*="contact100-form validate-form"]',
                        subjectIdentifiers: [{"name":"Name","selector":"[name = \"name\"]","isPrimary":false},{"name":"Email","selector":"[name = \"email\"]","isPrimary":true},{"name":"Phone","selector":"[name = \"phone\"]","isPrimary":false}],
                        consentIdentifiers: [{"type":"checkbox","name":"copy-mail","selector":"[name = \"copy-mail\"]","propertyId":9339,"consentValue":"checked"},{"type":"checkbox","name":"Tech-mail","selector":"[name = \"Tech-mail\"]","propertyId":9340,"consentValue":"checked"}],
                        consentTrigger: {
                            action: 'click',
                            selector: '[class = "contact100-form-btn"]'
                        }
                    }

                    var isConsentTaken = false
                    var prepareConsentPayload = function(formEle) {
                        if (!isConsentTaken) {
                            isConsentTaken = true
                            const emailField = formEle.querySelector("[type = \"email\"]")
                            let payload = {
                                form_info: {
                                    subject_info: {}
                                },
                                consent_info: [],
                                browser_finger_print: browserFingerPrint,
                                policy_version: 1,
                                form_property_id: codeGenMetadata.formPropertyId
                            }

                            if (codeGenMetadata.consentIdentifiers.length === 1 && codeGenMetadata.consentIdentifiers[0].name === 'DefaultElementId') {
                                payload.consent_info.push({
                                    granted: true,
                                    timestamp: parseInt(new Date().getTime() / 1000),
                                    property_id: parseInt(codeGenMetadata.consentIdentifiers[0].propertyId)
                                })
                            } else {
                                codeGenMetadata.consentIdentifiers.forEach(function(identifier) {
                                    payload.consent_info.push({
                                        granted: getGranted(identifier, formEle),
                                        timestamp: parseInt(new Date().getTime() / 1000),
                                        property_id: parseInt(identifier.propertyId)
                                    })
                                })
                            }

                            codeGenMetadata.subjectIdentifiers.forEach(function(identifier) {
                                payload.form_info.subject_info[identifier.name] = formEle.querySelector(identifier.selector) && formEle.querySelector(identifier.selector).value || ''
                                if (!payload.hasOwnProperty('uuid') && identifier.isPrimary) {
                                    payload.uuid = payload.form_info.subject_info[identifier.name] || ''
                                }
                            })
                            return payload
                        }
                    }

                    function getGranted(identifier, formEle) {
                        if (identifier.type == 'checkbox') {
                            return identifier.consentValue === 'checked' ? formEle.querySelector(identifier.selector).checked : !formEle.querySelector(identifier.selector).checked
                        } else {
                            return identifier.consentValue === Array.prototype.slice.call(formEle.querySelectorAll(identifier.selector)).filter(function(r) { return r.checked })[0].value
                        }
                    }

                    function postConsentedItems(consentedItem) {
                        var xhr = new XMLHttpRequest();
                        xhr.open('POST', 'https://qa.securiti.xyz/privaci/v1/consent/form/singleupload', false);
                        xhr.setRequestHeader('Content-type', 'application/json');
                        xhr.setRequestHeader('X-Auth-Token', '27431900-12f7-4877-a1c7-64e3053157fa');

                        xhr.onload = function () {
                            if (this.status >= 200 && this.status < 300) {
                                let resp = JSON.parse(xhr.response)
                                if (resp.status === 0) {
                                    console.log('consent uploaded successfully');
                                }
                            } else {
                                console.log('consent upload failed', this.status, xhr.statusText);
                            }
                            setTimeout(function () { isConsentTaken = false }, 0)
                        };
                        xhr.onerror = function () {
                            console.log('consent upload failed', this.status, xhr.statusText);
                            setTimeout(function () { isConsentTaken = false }, 0)
                        };
                        xhr.send(JSON.stringify(consentedItem));
                    }

                    var uploadConsent = function () {
                        let payload = prepareConsentPayload(document.querySelector(codeGenMetadata.formSelector))
                        if(payload) {
                            return postConsentedItems(payload);
                        }
                    }

                    document.querySelector(codeGenMetadata.formSelector).addEventListener('submit', function () {
                        uploadConsent()
                    })

                    if (codeGenMetadata.consentTrigger.action === 'click') {
                        document.querySelector(codeGenMetadata.formSelector).querySelector(codeGenMetadata.consentTrigger.selector)
                            .addEventListener(codeGenMetadata.consentTrigger.action, function () {
                                uploadConsent()
                            })
                        }
                    })</script>
	<div class="container-contact100">
		<div class="wrap-contact100">
			<form class="contact100-form validate-form">
				<span class="contact100-form-title">
					Get in Touch
				</span>

				<div class="wrap-input100 validate-input" data-validate="Name is required">
					<input class="input100" id="name" type="text" name="name" placeholder="Name">
					<label class="label-input100" for="name">
						<span class="lnr lnr-user"></span>
					</label>
				</div>

				<div class="wrap-input100 validate-input" data-validate = "Valid email is required: ex@abc.xyz">
					<input class="input100" id="email" type="text" name="email" placeholder="Email">
					<label class="label-input100" for="email">
						<span class="lnr lnr-envelope"></span>
					</label>
				</div>

				<div class="wrap-input100 validate-input" data-validate = "Phone is required">
					<input class="input100" id="phone" type="text" name="phone" placeholder="Phone">
					<label class="label-input100" for="phone">
						<span class="lnr lnr-phone-handset"></span>
					</label>
				</div>

				<div class="wrap-input100 validate-input" data-validate = "Message is required">
					<textarea class="input100" name="message" placeholder="Your message..."></textarea>
				</div>

				<div class="contact100-form-checkbox">
					<input class="input-checkbox100" id="ckb1" type="checkbox" name="copy-mail">
					<label class="label-checkbox100" for="ckb1">
						Send copy to my-email
					</label>
				</div>

				<div class="container-contact100-form-btn">
					<div class="wrap-contact100-form-btn">
						<div class="contact100-form-bgbtn"></div>
						<button class="contact100-form-btn">
							Send Email
						</button>
					</div>
				</div>
			</form>
		</div>
	</div>



	<div id="dropDownSelect1"></div>

<!--===============================================================================================-->
	<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/bootstrap/js/popper.js"></script>
	<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
	<script src="vendor/daterangepicker/moment.min.js"></script>
	<script src="vendor/daterangepicker/daterangepicker.js"></script>
<!--===============================================================================================-->
	<script src="vendor/countdowntime/countdowntime.js"></script>
<!--===============================================================================================-->
	<script src="js/main.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-23581568-13');
</script>

</body>
</html>
