<!DOCTYPE html>
<html lang="en-us" prefix="og: http://ogp.me/ns#">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intercept POST Request</title>

<!-- After adding this script, call setConsentBannerParams({uuid: <unique id> }) to set unique ID for a customer.  -->
<script
defer
data-strict-csp
data-skip-css="false"
src="https://cdn-qa.securiti.xyz/consent/cookie-consent-sdk-loader-strict-csp.js"
data-tenant-uuid="b29eb313-51d2-457d-891e-721e1f67b139"
data-domain-uuid="ad9ff680-5e6b-4d89-98ae-175a9052bca9"
data-backend-url="https://qa.securiti.xyz">
</script>

</head>
<body>
    <form id="myForm">
        <label for="data">Data:</label>
        <input type="text" id="data" name="data">
        <button type="submit">Submit</button>
    </form>

    <script>
        
        // Printing single upload payload Starts here
       (function() {
    var originalOpen = XMLHttpRequest.prototype.open;
    XMLHttpRequest.prototype.open = function() {
        this.addEventListener('readystatechange', function() {
            if (this.readyState === 4 && this.responseURL.includes('singleupload')) { // Request is done
                var jsonString = this._body;
                var jsonObject = JSON.parse(jsonString);
                var uuid = jsonObject.uuid;
                console.log("uuid=>"+uuid);
                var domain_id = jsonObject.domain_id;
                console.log("domain_id=>"+domain_id);
                var policy_version = jsonObject.policy_version;
                console.log("policy_version=>"+policy_version);
            }
        }, false);

        originalOpen.apply(this, arguments);
    };

    var originalSend = XMLHttpRequest.prototype.send;
    XMLHttpRequest.prototype.send = function(body) {
        this._body = body;
        originalSend.apply(this, arguments);
    };
})();

// Printing single upload payload ends here

    </script>
</body>
</html>